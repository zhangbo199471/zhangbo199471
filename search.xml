<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Linux内核升级之Centos</title>
      <link href="/2018/12/29/linux-nei-he-sheng-ji-zhi-centos/"/>
      <url>/2018/12/29/linux-nei-he-sheng-ji-zhi-centos/</url>
      
        <content type="html"><![CDATA[<p>在工作或者学习中，很多时候我们需要用新的<code>linux</code>内核来验证一些前沿的技术或者功能，这个时候我们所用的<code>linux</code>内核太低的话，就需要升级内核了。以下整理了<code>Centos7</code>升级内核的过程。</p><p>到<a href="http://www.kernel.org" target="_blank" rel="noopener">Linux官网</a>下载需要升级的内核源码。最好选择稳定版本或者长期支持版。</p><h2 id="解压到-usr-src路径下"><a href="#解压到-usr-src路径下" class="headerlink" title="解压到/usr/src路径下"></a>解压到<code>/usr/src</code>路径下</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -xvf linux-4.19.6.tar.xz -C /usr/src/</code></pre><h2 id="切换路径"><a href="#切换路径" class="headerlink" title="切换路径"></a>切换路径</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /usr/src</code></pre><h2 id="创建软连接"><a href="#创建软连接" class="headerlink" title="创建软连接"></a>创建软连接</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">ln</span> -sv linux-4.19.6 linux<span class="token function">cd</span> linux</code></pre><blockquote><p><strong>注意</strong>：通常有很多应用程序比如额外编译驱动时都会到<code>/usr/src</code>下找，而且会到<code>/usr/src</code>下找<code>linux</code>的目录，而不是去找<code>linux-3.18.60</code>，因此我们需要去建立软连接。</p></blockquote><h2 id="配置和编译内核"><a href="#配置和编译内核" class="headerlink" title="配置和编译内核"></a>配置和编译内核</h2><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> ncurses-devel -yyum <span class="token function">install</span> bison -y<span class="token function">make</span> menuconfig     //配置内核 <span class="token function">make</span> -j  20        //编译内核<span class="token function">make</span> modules_install  //安装内核<span class="token function">make</span> <span class="token function">install</span></code></pre><blockquote><p><strong>注意</strong>：编译新内核完成后，系统默认启动的还是之前的内核，除非在系统启动的时候手动的选择。当然我们如果常用新的内核，也可以更改默认启动项。</p></blockquote><h2 id="查看默认启动内核"><a href="#查看默认启动内核" class="headerlink" title="查看默认启动内核"></a>查看默认启动内核</h2><pre class=" language-bash"><code class="language-bash">grub2-editenv list</code></pre><div align="center"><img width="500" height="300" src="图1.png/"></div><h2 id="查看所有内核"><a href="#查看所有内核" class="headerlink" title="查看所有内核"></a>查看所有内核</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">cat</span> /boot/grub2/grub.cfg <span class="token operator">|</span> <span class="token function">grep</span> menuentry</code></pre><h2 id="修改默认内核"><a href="#修改默认内核" class="headerlink" title="修改默认内核"></a>修改默认内核</h2><pre class=" language-bash"><code class="language-bash">grub2-set-default <span class="token string">'CentOS Linux (4.19.6) 7 (Core)'</span></code></pre><h2 id="验证默认启动内核"><a href="#验证默认启动内核" class="headerlink" title="验证默认启动内核"></a>验证默认启动内核</h2><pre class=" language-bash"><code class="language-bash">grub2-editenv list</code></pre><div align="center"><img width="500" height="300" src="图2.png/"></div>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
